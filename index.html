<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Checkout</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      color-scheme: dark;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      --bg: #0b0b0c;
      --panel: rgba(21, 21, 23, 0.88);
      --panel-border: rgba(255, 255, 255, 0.08);
      --input-bg: #1a1b1f;
      --input-border: #2c2f38;
      --input-border-hover: #3b4150;
      --accent: #f7a300;
      --accent-strong: #ffb12a;
      --text: #f2f2f2;
      --muted: #9ea3ad;
      --success: #6ff0a1;
      --error: #ff6b6b;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #1b1b1f 0%, #0a0a0c 45%, #050506 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 48px 16px 72px;
    }

    .page {
      width: min(760px, 100%);
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    header {
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: clamp(28px, 4vw, 38px);
      letter-spacing: 0.02em;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: 24px;
      padding: 28px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(16px);
    }

    .panel-title {
      text-align: center;
      font-size: 22px;
      font-weight: 600;
      margin: 0 0 20px;
    }

    .pay-buttons {
      display: grid;
      gap: 14px;
    }

    .pay-button {
      border: none;
      background: #ffffff;
      color: #111;
      padding: 16px 20px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .pay-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.35);
    }

    .pay-button:active {
      transform: translateY(0);
    }

    .credit-grid {
      display: grid;
      gap: 18px;
    }

    .card-logos {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 6px;
    }

    .card-logo {
      background: #fff;
      color: #111;
      border-radius: 10px;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 700;
      font-size: 12px;
    }

    label {
      display: block;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .input-field {
      width: 100%;
      border-radius: 14px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      padding: 14px 16px;
      color: var(--text);
      font-size: 16px;
      transition: border 0.2s ease, box-shadow 0.2s ease;
      outline: none;
    }

    .input-field:hover {
      border-color: var(--input-border-hover);
    }

    .input-field:focus {
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 3px rgba(255, 177, 42, 0.2);
    }

    .input-field.is-invalid {
      border-color: var(--error);
      box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.15);
    }

    .input-field.is-valid {
      border-color: var(--success);
    }

    .input-row {
      display: grid;
      gap: 16px;
    }

    @media (min-width: 560px) {
      .input-row.two {
        grid-template-columns: 1fr 1fr;
      }
    }

    .hint {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
    }

    .error {
      font-size: 12px;
      color: var(--error);
      margin-top: 6px;
      min-height: 16px;
    }

    .stripe {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
    }

    .stripe span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .stripe strong {
      font-size: 16px;
      color: #7f78ff;
    }

    .submit {
      background: linear-gradient(135deg, #f5a200, #ffb128);
      border: none;
      padding: 16px 20px;
      border-radius: 16px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      color: #17100a;
      box-shadow: 0 10px 24px rgba(255, 172, 32, 0.3);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      width: 100%;
    }

    .submit:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 30px rgba(255, 172, 32, 0.4);
    }

    .submit:disabled {
      cursor: not-allowed;
      opacity: 0.6;
      box-shadow: none;
      transform: none;
    }

    .guarantee {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      color: var(--muted);
      font-size: 14px;
      justify-content: center;
      margin-top: 12px;
    }

    .save {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      color: var(--muted);
    }

    .save input {
      width: 18px;
      height: 18px;
      accent-color: var(--accent);
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      padding: 16px;
    }

    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-card {
      background: #16171b;
      border-radius: 20px;
      padding: 26px;
      max-width: 420px;
      width: 100%;
      border: 1px solid rgba(255, 255, 255, 0.08);
      text-align: center;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.45);
    }

    .modal-card h3 {
      margin-top: 0;
      font-size: 22px;
    }

    .modal-card p {
      color: var(--muted);
      margin: 10px 0 20px;
    }

    .close {
      border: none;
      background: #23252c;
      color: var(--text);
      padding: 10px 16px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .close:hover {
      background: #2c2f38;
    }
  </style>
</head>
<body>
  <main class="page">
    <header>
      <h1>Checkout</h1>
    </header>

    <section class="panel">
      <h2 class="panel-title">Fast Payments</h2>
      <div class="pay-buttons">
        <button class="pay-button" type="button">
          <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true" fill="#111">
            <path d="M16.2 12.7c0-2.1 1.7-3.1 1.8-3.2-1-1.5-2.5-1.7-3-1.7-1.3-.1-2.5.8-3.2.8-.7 0-1.8-.8-2.9-.8-1.5 0-2.9.9-3.6 2.2-1.6 2.7-.4 6.7 1.1 8.9.7 1 1.5 2 2.6 1.9 1.1 0 1.4-.7 2.6-.7 1.2 0 1.5.7 2.6.7 1.2 0 1.9-1 2.6-2 0 0 .7-1 .9-2-2.1-.8-2.5-2.6-2.5-3.1z" />
            <path d="M15.2 4.3c.5-.6.8-1.4.7-2.3-.7.1-1.6.5-2.1 1.1-.4.5-.8 1.3-.7 2.2.8.1 1.6-.4 2.1-1z" />
          </svg>
          Apple Pay
        </button>
        <button class="pay-button" type="button">
          <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="#4285F4" d="M21.35 11.1h-9.18v2.96h5.33c-.23 1.22-1.39 3.58-5.33 3.58-3.21 0-5.83-2.65-5.83-5.92s2.62-5.92 5.83-5.92c1.83 0 3.06.78 3.76 1.46l2.57-2.48C16.86 3.12 14.76 2 12.17 2 6.99 2 2.8 6.19 2.8 11.72s4.2 9.72 9.37 9.72c5.41 0 8.99-3.8 8.99-9.16 0-.61-.06-1.07-.13-1.48z" />
          </svg>
          Google Pay
        </button>
      </div>
    </section>

    <section class="panel">
      <h2 class="panel-title">Credit card</h2>
      <div class="card-logos">
        <span class="card-logo">Mastercard</span>
        <span class="card-logo">VISA</span>
        <span class="card-logo">Maestro</span>
        <span class="card-logo" style="background:#1b9bd7;color:#fff;">AMEX</span>
        <span class="card-logo">DISCOVER</span>
      </div>

      <form id="checkout-form" class="credit-grid" novalidate>
        <div>
          <label for="cardNumber">Card number</label>
          <input id="cardNumber" class="input-field" type="text" inputmode="numeric" autocomplete="cc-number" placeholder="XXXX XXXX XXXX XXXX" value="4242 4242 4242 4242" maxlength="19" />
          <div class="stripe">
            <span>
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" fill="none">
                <path d="M7 11V7a5 5 0 0110 0v4" stroke="#9ea3ad" stroke-width="1.5" stroke-linecap="round" />
                <rect x="5" y="11" width="14" height="10" rx="3" stroke="#9ea3ad" stroke-width="1.5" />
              </svg>
              Secured by
            </span>
            <strong>stripe</strong>
          </div>
          <div class="error" id="cardError"></div>
        </div>

        <div class="input-row two">
          <div>
            <label for="expiry">Expiration date</label>
            <input id="expiry" class="input-field" type="text" inputmode="numeric" autocomplete="cc-exp" placeholder="MM/YY" value="09/27" maxlength="5" />
            <div class="error" id="expiryError"></div>
          </div>
          <div>
            <label for="cvc">Security code</label>
            <input id="cvc" class="input-field" type="text" inputmode="numeric" autocomplete="cc-csc" placeholder="CVC" value="123" maxlength="4" />
            <div class="error" id="cvcError"></div>
          </div>
        </div>

        <div>
          <label for="email">Email (Your login)</label>
          <input id="email" class="input-field" type="email" autocomplete="email" placeholder="useremail@mail.com" value="useremail@mail.com" />
          <div class="hint">We will send the receipt to your email.</div>
          <div class="error" id="emailError"></div>
        </div>

        <button class="submit" type="submit">Complete Payment</button>
        <div class="guarantee">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" fill="none">
            <path d="M12 3l7 3v6c0 4.4-3 8.3-7 9-4-0.7-7-4.6-7-9V6l7-3z" stroke="#f7a300" stroke-width="1.5" />
            <path d="M9 12l2 2 4-4" stroke="#f7a300" stroke-width="1.5" stroke-linecap="round" />
          </svg>
          Money-Back Guarantee
        </div>
        <label class="save">
          <input type="checkbox" checked />
          Save this payment method
        </label>
      </form>
    </section>
  </main>

  <div class="modal" id="successModal" aria-hidden="true">
    <div class="modal-card">
      <h3>Payment confirmed ✅</h3>
      <p>Данные получены. Оплата прошла успешно, чек отправлен на вашу почту.</p>
      <button class="close" type="button" id="closeModal">Закрыть</button>
    </div>
  </div>

  <script>
    const form = document.getElementById("checkout-form");
    const cardNumber = document.getElementById("cardNumber");
    const expiry = document.getElementById("expiry");
    const cvc = document.getElementById("cvc");
    const email = document.getElementById("email");
    const modal = document.getElementById("successModal");
    const closeModal = document.getElementById("closeModal");

    const cardError = document.getElementById("cardError");
    const expiryError = document.getElementById("expiryError");
    const cvcError = document.getElementById("cvcError");
    const emailError = document.getElementById("emailError");

    const sanitizeNumber = (value) => value.replace(/\D/g, "");

    const formatCardNumber = (value) =>
      sanitizeNumber(value)
        .slice(0, 16)
        .replace(/(\d{4})(?=\d)/g, "$1 ");

    const formatExpiry = (value) => {
      const numbers = sanitizeNumber(value).slice(0, 4);
      if (numbers.length <= 2) {
        return numbers;
      }
      return `${numbers.slice(0, 2)}/${numbers.slice(2)}`;
    };

    const validateCard = () => {
      const raw = sanitizeNumber(cardNumber.value);
      if (raw.length !== 16) {
        cardError.textContent = "Введите 16 цифр номера карты.";
        cardNumber.classList.add("is-invalid");
        cardNumber.classList.remove("is-valid");
        return false;
      }
      cardError.textContent = "";
      cardNumber.classList.remove("is-invalid");
      cardNumber.classList.add("is-valid");
      return true;
    };

    const validateExpiry = () => {
      const value = expiry.value;
      const match = value.match(/^(\d{2})\/(\d{2})$/);
      if (!match) {
        expiryError.textContent = "Формат должен быть MM/YY.";
        expiry.classList.add("is-invalid");
        expiry.classList.remove("is-valid");
        return false;
      }
      const month = Number(match[1]);
      if (month < 1 || month > 12) {
        expiryError.textContent = "Месяц должен быть от 01 до 12.";
        expiry.classList.add("is-invalid");
        expiry.classList.remove("is-valid");
        return false;
      }
      expiryError.textContent = "";
      expiry.classList.remove("is-invalid");
      expiry.classList.add("is-valid");
      return true;
    };

    const validateCvc = () => {
      const raw = sanitizeNumber(cvc.value);
      if (raw.length < 3 || raw.length > 4) {
        cvcError.textContent = "CVC должен быть 3-4 цифры.";
        cvc.classList.add("is-invalid");
        cvc.classList.remove("is-valid");
        return false;
      }
      cvcError.textContent = "";
      cvc.classList.remove("is-invalid");
      cvc.classList.add("is-valid");
      return true;
    };

    const validateEmail = () => {
      const value = email.value.trim();
      const isValid = /\S+@\S+\.\S+/.test(value);
      if (!isValid) {
        emailError.textContent = "Введите корректный email.";
        email.classList.add("is-invalid");
        email.classList.remove("is-valid");
        return false;
      }
      emailError.textContent = "";
      email.classList.remove("is-invalid");
      email.classList.add("is-valid");
      return true;
    };

    cardNumber.addEventListener("input", () => {
      cardNumber.value = formatCardNumber(cardNumber.value);
      validateCard();
    });

    expiry.addEventListener("input", () => {
      expiry.value = formatExpiry(expiry.value);
      validateExpiry();
    });

    cvc.addEventListener("input", () => {
      cvc.value = sanitizeNumber(cvc.value).slice(0, 4);
      validateCvc();
    });

    email.addEventListener("input", () => {
      validateEmail();
    });

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      const isValid = [validateCard(), validateExpiry(), validateCvc(), validateEmail()].every(Boolean);
      if (isValid) {
        modal.classList.add("active");
        modal.setAttribute("aria-hidden", "false");
      }
    });

    closeModal.addEventListener("click", () => {
      modal.classList.remove("active");
      modal.setAttribute("aria-hidden", "true");
    });

    modal.addEventListener("click", (event) => {
      if (event.target === modal) {
        modal.classList.remove("active");
        modal.setAttribute("aria-hidden", "true");
      }
    });

    [validateCard, validateExpiry, validateCvc, validateEmail].forEach((fn) => fn());
  </script>
</body>
</html>
